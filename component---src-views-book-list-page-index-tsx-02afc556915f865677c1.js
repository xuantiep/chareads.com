(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"4jQy":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n,r){window.gtag&&window.gtag("event",e,Object.assign({event_category:t,event_label:n},r))}},rcno:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e){return e.edges.map((function(e){return e.node}))}},sJrP:function(e,t,n){"use strict";var r=n("q1tI"),a=n.n(r),i="undefined"!=typeof window?r.useLayoutEffect:r.useEffect,o="undefined"!=typeof window,c=function(e,t,n,r){var a=null,c=function(){e(function(e){return o?(e.current||document.body).getBoundingClientRect().bottom-window.innerHeight:0}(r)),a=null};i((function(){if(o){var e=function(){t?null===a&&(a=setTimeout(c,t)):c()};return window.addEventListener("scroll",e),function(){return window.removeEventListener("scroll",e)}}}),n||[])},u="undefined"!=typeof window;t.a=function(e){var t=e.items,n=e.renderItem,i=Object(r.createRef)(),o=Object(r.useState)(24),l=o[0],f=o[1];return Object(r.useLayoutEffect)((function(){f(24)}),[t.length]),c((function(e){e<400&&l<t.length&&f(l+8)}),300,[l,t.length],i),a.a.createElement(a.a.Fragment,null,t.slice(0,u?l:t.length).map(n),a.a.createElement("span",{ref:i}))}},uVIV:function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return l}));n("RUBk");var r=n("t8Zj"),a=n("SbvX"),i={type:"Type",genre:"Genre",sub:"Subject"},o=function(e){var t=e.split("-");return[t[0],t.slice(1).join("-"),e]},c=function(e){var t=e.map(o).reduce((function(e,t){var n=t[0],r={name:t[1],unprefixed:t[2]};return e[n]?e[n].push(r):e[n]=[r],e}),{});return Object.keys(i).filter((function(e){return t[e]})).map((function(e){return{prefix:i[e],values:t[e]}}))},u=function(e,t){var n=[];e.forEach((function(e){return n.push.apply(n,Object(r.a)(e.tags))}));var i=Object(r.a)(new Set(n)),o=Object(a.a)(i);return t?o.filter((function(e){return e.startsWith(t+"-")})).map((function(e){return e.slice(t.length+1)})):o},l=function(e,t,n,r,a){var i=e;return t&&"type"!==a&&(i=i.filter((function(e){return e.tags.includes("type-"+t)}))),n&&"genre"!==a&&(i=i.filter((function(e){return e.tags.includes("genre-"+n)}))),r&&"sub"!==a&&(i=i.filter((function(e){return e.tags.includes("sub-"+r)}))),i}},w0pu:function(e,t,n){"use strict";n.r(t);var r=n("AcpX"),a=n("q1tI"),i=n.n(a),o=n("vOnD"),c=n("rcno"),u=n("NsgW"),l=n("6p55"),f=n("hQ1k"),s=n("F9MX"),d=n("1EL1"),m=n("6t0R"),g=n("cRSu"),p=n("sJrP"),b=n("uVIV"),v=function(e,t){var n=Object(a.useRef)(),r=function(e){var r=e.clientX,a=e.clientY;if(n&&n.current){var i=n.current.getBoundingClientRect(),o=i.top,c=i.bottom,u=i.left,l=i.right;(r<u||r>l||a<o||a>c)&&t()}};return Object(a.useEffect)((function(){return e?window.addEventListener("click",r):window.removeEventListener("click",r),function(){e&&window.removeEventListener("click",r)}}),[e]),[n]},y=n("4jQy"),w=o.c.span.withConfig({displayName:"FilterTrigger__StyledWrapper",componentId:"m0dtlq-0"})(["position:relative;display:inline-block;"]),h=o.c.ol.withConfig({displayName:"FilterTrigger__StyledOptions",componentId:"m0dtlq-1"})(["position:absolute;background:",";border-radius:",";border:1px solid ",";box-shadow:0 2px 8px ","20;min-width:11em;max-height:20.5em;top:-0.25rem;left:-0.5rem;margin:-1px;padding:0 0 0.25rem;z-index:1;line-height:1.25;overflow:auto;::-webkit-scrollbar{width:0.25em;border-radius:0 "," "," 0;}::-webkit-scrollbar-thumb{background:",";}"],l.c.BACKGROUND_LIGHT,l.a.M,l.c.BACKGROUND_DARK,l.c.SHADOW,l.a.S,l.a.S,l.c.BACKGROUND_DARK),E=o.c.li.withConfig({displayName:"FilterTrigger__StyledOption",componentId:"m0dtlq-2"})(["padding:0.125rem 0.5rem;font-size:",";cursor:pointer;user-select:none;"," &:first-child{",";font-style:italic;font-size:",";padding:0.25rem 0.5rem;line-height:1.5;}&:nth-child(n + 2):hover{background:","10;}"],l.e.SIZE.S,(function(e){return e.$default&&"\n    "+l.d+";\n  "}),l.d,l.e.SIZE.M,l.c.SHADOW),k=o.c.span.withConfig({displayName:"FilterTrigger__StyledTrigger",componentId:"m0dtlq-3"})(["",";font-style:italic;cursor:pointer;user-select:none;"],l.d),O=function(e){var t=e.value,n=e.defaultLabel,r=e.options,o=e.trackingCategory,c=e.onChange,u=Object(a.useState)(!1),l=u[0],f=u[1],s=v(l,(function(){return f(!1)}))[0],d=t||n,m=function(e){return f(!1),e?(Object(y.a)("book-filter",o,e),c(e)):c(void 0)},g=t?r.filter((function(e){return e!==t})):r;return g&&0!==g.length?i.a.createElement(w,{ref:s},i.a.createElement(k,{onClick:function(){return f(!l)}},d),l&&i.a.createElement(h,null,i.a.createElement(E,{onClick:function(){return f(!1)}},d),n!==d&&i.a.createElement(E,{onClick:function(){return m(void 0)},$default:!0},n),g.map((function(e){return i.a.createElement(E,{key:e,onClick:function(){return m(e)}},e)})))):i.a.createElement(i.a.Fragment,null,t||n)},j=n("Wtfd"),S=n("YwZP"),C=n("Qyje"),_=n.n(C),L=function(e,t,n){var r=Object(a.useState)(!0),i=r[0],o=r[1],c=_.a.parse(t,{ignoreQueryPrefix:!0,comma:!0});return Object(a.useEffect)((function(){n.forEach((function(e){var t=e.setter,n=e.key;t(c[n])})),o(!1)}),[]),Object(a.useEffect)((function(){n.forEach((function(e){var t=e.key,n=e.value,r=e.setter;c[t]!==n&&r(c[t])}))}),[t]),Object(a.useEffect)((function(){if(!i){var r={};n.forEach((function(e){var t=e.key,n=e.value;r[t]=n}));var a=_.a.stringify(r,{addQueryPrefix:!0,arrayFormat:"comma",encode:!1});a!==t&&Object(S.navigate)(""+e+a)}}),n.map((function(e){return e.value}))),[i]};function I(){var e=Object(r.a)(["\n    font-size: ",";\n  "]);return I=function(){return e},e}var B=Object(o.c)(g.a).withConfig({displayName:"BookListPage__StyledDetails",componentId:"sc-1gunfte-0"})(["background:",";padding:1em;"],l.c.BACKGROUND_LIGHT),F=Object(o.c)(g.a).withConfig({displayName:"BookListPage__StyledBook",componentId:"sc-1gunfte-1"})(["",""],(function(e){var t=e.big;return f.c.m(I(),t?"1.25em":l.e.SIZE.S)})),R=Object(o.c)(s.a).withConfig({displayName:"BookListPage__StyledClearFilterButton",componentId:"sc-1gunfte-2"})(["font-size:0.75em;"]);t.default=function(e){var t=e.data.bookData,n=e.location,r=Object(c.a)(t),o=Object(a.useState)(void 0),l=o[0],f=o[1],s=Object(a.useState)(void 0),g=s[0],v=s[1],y=Object(a.useState)(void 0),w=y[0],h=y[1],E=L(j.a.BOOKS,n.search,[{key:"type",value:l,setter:f},{key:"genre",value:g,setter:v},{key:"sub",value:w,setter:h}])[0],k=Object(b.a)(r,l,g,w),S=l||g||w,C=function(e){var t=S?Object(b.a)(r,l,g,w,e):r;return Object(b.b)(t,e)};return i.a.createElement(u.a,{location:n,navOpenOnDesktop:!0,navTitle:"Book reviews",title:"Book reviews"},(!E||""===n.search)&&i.a.createElement(m.a,{as:"ol",full:!0},i.a.createElement(B,{span:2,spanFromM:6,spanFromL:4},i.a.createElement("p",null,"Showing ",k.length," ",1===k.length?"book":"books",i.a.createElement("br",null),i.a.createElement(O,{value:l,defaultLabel:"fiction and non-fiction",options:C("type"),trackingCategory:"type",onChange:f}),i.a.createElement("br",null),"in ",i.a.createElement(O,{value:g,defaultLabel:"any genre",options:C("genre"),trackingCategory:"genre",onChange:v}),i.a.createElement("br",null),"about ",i.a.createElement(O,{value:w,defaultLabel:"any subject",options:C("sub"),trackingCategory:"sub",onChange:h}),S&&i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement(R,{as:"button",onClick:function(){f(void 0),v(void 0),h(void 0)}},"clear filter")))),i.a.createElement(p.a,{items:k,renderItem:function(e){var t=e.rating7>=6;return i.a.createElement(F,{big:t,as:"li",key:e.id,span:1,spanFromM:t?6:3,spanFromL:t?4:2,spanRowsFromM:t?2:1},i.a.createElement(d.a,{book:e,featured:t,big:t}))}})))}}}]);
//# sourceMappingURL=component---src-views-book-list-page-index-tsx-02afc556915f865677c1.js.map